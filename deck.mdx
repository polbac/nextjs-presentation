import { swiss } from '@mdx-deck/themes'
import { Image } from 'mdx-deck'
import Codeblock from './codeblock'



# nextjs & server side rendering

---

## #ï¸âƒ£ topics

<ul>
    <Appear>
        <li>front-end application (ui)</li>
        <li>server side rendering</li>
        <li>react</li>
        <li>express</li>
    </Appear>
</ul>

---

### 1ï¸âƒ£ single page application
<ul>
    <Appear>
        <li>react</li>
        <li>angular</li>
        <li>vue</li>
        <li>svelte</li>
    </Appear>
</ul>

---

### ğŸ¿ stack on suricata team
<ul>
    <Appear>
        <li>next</li>
        <li>typescript</li>
        <li>redux</li>
        <li>redux-saga</li>
        <li>hooks</li>
    </Appear>
</ul>

---

### ğŸš€ benefits (spa)
<ul>
    <Appear>
        <li>scale</li>
        <li>reuse</li>
        <li>modern (not hype)</li>
        <li>comunity</li>
    </Appear>
</ul>

---

###  ğŸ‘º trade-off (spa)
<ul>
    <Appear>
        <li>seo</li>
        <li>performance</li>
    </Appear>
</ul>

---

###  ğŸœ seo
<Codeblock code={`
    <html>
        <head>
            <title>my awesome app</title>
        </head>
        <body>
            <div id="app"></div>
            <script src="bundle.d786d7a9s6d7as8das.js"></script>
        </body>
    </html>
`} />

---

###  ğŸŒ performance / scripting + rendering + first load

<img src="https://i.ibb.co/7SDjYD2/performance.png" alt="performance" border="0" width="1100" /> 

---

<Codeblock code={`
    export class NewsComponent extends React.Component {
        componendDidMount() {
            fetch('api/news')
                .then(news => this.setState({ news }))
        }
        render() {
            ...
        }
    }
`} />

---

<img src="https://img-s-msn-com.akamaized.net/tenant/amp/entityid/AAB84hZ.img?h=416&w=624&m=6&q=60&o=f&l=f&x=0&y=0" />

---

<img src="https://media.giphy.com/media/7LE0z2EEAiVCU/source.gif" />

---

###  â˜¢  server side rendering

---

<img src="https://media.giphy.com/media/3o7527pa7qs9kCG78A/giphy.gif" />

---

<img src="https://i.ibb.co/VVrNTC1/client.png" width="1300"/>

---

###  ğŸ” con server-side rendering

---

<img src="https://i.ibb.co/x15m6kd/ssr2.png"  width="1300"/>


---

# client â˜¯ server

---

# ~~isomorphic~~ universal

<img src="https://media.giphy.com/media/YkXNjAkG7CfEVx3gcy/giphy.gif" />

---

## browser

âŒ process âŒ request âŒ response âŒ files âŒ network âŒ etc

---

## server

âŒ fetch âŒ window âŒ document âŒ localStorage âŒ etc

---

<Codeblock code={`export const getNews = () => new Promise((resolve, reject) => 
        fetch(NEWS_API)
            .then(response => response.json())
            .then(content => resolve(content))
    )`} />

---

<Codeblock code={`
    import * from 'universal-fetch'
    export const getNews = () => new Promise((resolve, reject) => 
        fetch(NEWS_API)
            .then(response => response.json())
            .then(content => resolve(content))
    )
`} />

---

<a href='https://nextjs.org/' target='_blank'><img src="https://i.imgur.com/sxESnvo.png"/></a>

---

<a target='_blank' href='https://www.zeit.co'><img src="https://assets.zeit.co/image/upload/q_auto/front/assets/design/white-triangle.png" width="300" /></a>

---

### ğŸ‡¦ğŸ‡· guillermo rauch
<img src="https://zeit.co/api/www/avatar/?u=rauchg&s=160" />

---

## ğŸ”¥features

<ul>
    <Appear>
        <li>file system routing</li>
        <li>automatic code splitting</li>
        <li>server side rendering</li>
        <li>static export</li>
        <li>custom server</li>
        <li><a href='https://github.com/zeit/next.js/tree/canary/examples' target='_blank'>plugins & examples</a></li>
    </Appear>
</ul>

---

<img width="11s00" src="https://i.ibb.co/jT7xf2W/Untitled-Diagram.jpg" />

---

<Codeblock code={`// server
ReactDOMServer.renderToString(<App />)
`} />


---

<Codeblock code={`// client
ReactDOM.render(<App />, document.getElementById('app'))
`} />

---

<Codeblock code={`
    export class NewsComponent extends React.Component {
        async getInitialProps() {  
            // server side 
            const response = await fetch('api/news')
            return { news: response.news }
        }
        componentDidMount()Â {
            // client side
        }
        render() {
            // ...
        }
    }
`} />

---

## ğŸ’«  lets code

<img src="https://media.giphy.com/media/dRVCJRxLceaI0/source.gif" width="500" />

---

## ğŸ¦‚  conclutions

<ul>
    <Appear>
        <li>do you really need?</li>
        <li>zero configuration === problems</li>
        <li>next is the best choice for ssr</li>
        <li>be careful where side you run your code</li>
    </Appear>
</ul>